function __getRuta() {
    // --------------- rutas --------------- //
    var rutaActual = location.href;
    $('.blueR').click(function() {
        localStorage.setItem("boutiqueBlue-crm-ruta", rutaActual);
    });
}
//--------------- KEYUP ---------------//
function __keyUp() {
    $("#gProducto").keyup(function() {
        var ganancia = $("#gProducto").val();
        var valor = (100 - ganancia) / 100;
        var price = $("#pCompra").val();
        var venta = Intl.NumberFormat('es-MX', {
            style: 'currency',
            currency: 'MXN'
        }).format(price / valor);
        $("#PrecioVenta").html(venta);
        var ventaFormat = (price / valor).toFixed(2);
        $("#vProducto").val(ventaFormat);
    });
    $("#pCompra").keyup(function() {
        var price = $("#pCompra").val();
        var ganancia = $("#gProducto").val();
        var valor = (100 - ganancia) / 100;
        var venta = Intl.NumberFormat('es-MX', {
            style: 'currency',
            currency: 'MXN'
        }).format(price / valor);
        $("#PrecioVenta").html(venta);
        var ventaFormat = (price / valor).toFixed(2);
        $("#vProducto").val(ventaFormat);
    });
}
//--------------- FORMATO NÚMERO DE TELÉFONO ---------------//
function __numTelFormat() {
    var count = $('#countResult').val();
    for (var i = 0; i < count; i++) {
        var numberFormat = $('.phoneFormat' + i).html();
        // console.log(i);
        if (numberFormat) {
            const parte1 = numberFormat.slice(0, 2);
            const parte2 = numberFormat.slice(2, 6);
            const parte3 = numberFormat.slice(6, 10);
            var numberFormatValue = `${parte1}-${parte2}-${parte3}`
            $('.phoneFormat' + i).html(numberFormatValue);
        }
    }
}
//--------------- CLICK ---------------//
function __click() {
}
// Usamos $(document).ready() para asegurar que el DOM esté completamente cargado
$(document).ready(function() {
    $(".btnVenta").click(function() {
        $("#vproducto").val($(this).val());
    });
    $(".btnApartar").click(function() {
        $("#aproducto").val($(this).val());
    });
    $("#data_list").hide();
    $("#data_grid").show();
    $("#btn_data_list").click(function() {
        $("#data_list").show();
        $("#data_grid").hide();
    });
    // Seleccionamos el input de búsqueda y la tabla con selectores jQuery
    const $searchInputList = $('#searchInputList');
    const $table = $('#myTable');
    const $rows = $table.find('tbody tr'); // Buscamos todas las filas dentro del tbody
    // Añadimos un escuchador de eventos 'keyup' al input de búsqueda
    $searchInputList.on('keyup', function() {
        const filter = $searchInputList.val().toLowerCase(); // Obtenemos el valor del input en minúsculas
        $rows.each(function() { // Iteramos sobre cada fila usando $.each()
            const $row = $(this); // Convertimos la fila actual a un objeto jQuery
            // Obtenemos el texto de todas las celdas de la fila y lo concatenamos
            // .text() en jQuery obtiene el texto combinado de todos los elementos hijos
            const textContent = $row.text().toLowerCase();
            // Comprobamos si el texto de búsqueda está contenido en el texto de la fila
            if (textContent.indexOf(filter) > -1) {
                // $row.removeClass('hide'); // Mostrar la fila
                $row.show(); // Mostrar la fila
            } else {
                // $row.addClass('hide'); // Ocultar la fila
                $row.hide(); // Ocultar la fila
            }
        });
    });
    $("#btn_data_grid").click(function() {
        $("#data_list").hide();
        $("#data_grid").show();
    });
    const $searchInputGrid = $('#searchInputGrid');
    const $productCards = $('#data_grid .card-container'); // Selecciona todos los div que contienen las cards
    const $noResultsMessage = $('#noResultsMessage');
    $searchInputGrid.on('keyup', function() {
        const filter = $searchInputGrid.val().toLowerCase();
        let foundResults = false;
        $productCards.each(function() {
            const $card = $(this); // El div col-md-3, etc. que contiene la card
            // Obtenemos el texto relevante para la búsqueda dentro de cada tarjeta
            // Esto incluye nombre, precio, stock, color, talla.
            // Ajusta los selectores si quieres buscar en menos elementos.
            const cardText = $card.find('.card-body').text().toLowerCase();
            if (cardText.indexOf(filter) > -1) {
                $card.show(); // Muestra la tarjeta
                foundResults = true;
            } else {
                $card.hide(); // Oculta la tarjeta
            }
        });
        // Muestra u oculta el mensaje de "no resultados"
        if (foundResults) {
            $noResultsMessage.hide();
        } else {
            $noResultsMessage.show();
        }
    });
});
$(document).ready(__getRuta);
$(document).ready(__keyUp);
$(document).ready(__numTelFormat);
$(document).ready(__click);